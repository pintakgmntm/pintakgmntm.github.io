<!DOCTYPE html>
<html lang="ja">
<head>

	<meta charset="UTF-8">
	<title>心理テスト</title>
	<script src="jquery-3.3.1.min.js"></script>
	<script src="jquery.mobile-1.4.5.min.js"></script>

<style>
    body{
        background-image: url(back2.jpg);
    }
    #gamePlay{
     
    }
    ul {
        list-style: none;
    }
    
    </style>
</head>
<body>
<div id="gamePlay">
<div id="mondai">
	</div>
	<div id="kaito">
	<ul id="sentaku">
        </ul>
    </div>

<div id="1">
<h1>
     ドラえもんの好きな食べ物は？
</h1>
<a href="#" onclick="seikai">
    <img src="1-1.jpg">
</a>
  <a href="#" onclick="matigai">
      <img src="1-2.jpg">
  </a>
   </div>
   
   <div id="2">
      <h1>
          ドラえもんは何ミリ浮いてる？</h1>
          <a href="#" onclick="seikai"> 
            <img src="2-1.jpg"></a>  
            <a href="#" onclick="matigai">
                <img src="2-2.jpg">
            </a> 
    </div>
            
             <div id="3">
                 <h1>
                     ドラえもんの誕生日は？
                 </h1>
                 <a href="#" onclick="seikai">
                     <img src="3-1.jpg">
                 </a>
                 <a href="#" onclick="matigai">
                     <img src="3-2.jpg">
                 </a>
    </div>
    
      <div id="4">
          <div id="gameEnd">
	<h1>結果発表</h1>
	<div id="score"></div>
	<div id="outline"></div>
	<div id="detail"></div>
	<div><a href="javascript:init();">もう一度ゲームを行う</a></div>
</div>
      </div>       
       
       
   
    </div>
	<script>
        $("#2").hide();
    
    $("#1 a").click(function(){
        $("#1").hide();
        $("#2").slideDown(500);
    });
            $("#3").hide();
    
    $("#2 a").click(function(){
        $("#2").hide();
        $("#3").slideDown(500);
    });
        
    
        $("#3 a").click(function(){
            $("#3").hide();
            $("#4").show(500);
        });
	
	var count = 0;
	var hit = 0;

var init=function(){
count=0;
hit=0;

document.getElementById('gamePlay').style = "display:block";
document.getElementById('gameEnd').style = "display:none";

question(count);
}

var question =function(num){
	var mondai = document.getElementById('mondai');
	var sentaku = document.getElementById('sentaku');

	while (sentaku.firstChild) {
		sentaku.removeChild(sentaku.firstChild);
	}

	mondai.textContent = q[num][0];	 

	for(i=1;i<=3;i++){
		toi1 = document.createElement('li');
		toi1.innerHTML += '<a href="javascript:answer('+i+')">'+q[num][i]+'</a>';
		sentaku.appendChild(toi1);
	}
}

var answer = function(num) {

	if (num == q[count][4]) {
		hit++;
	}
//回答数
count++;

	if(count == q.length){
		endScene();
	}else{
		question(count);
	}

}

endScene = function(){
document.getElementById('gamePlay').style = "display:none";
document.getElementById('gameEnd').style = "display:block";

document.getElementById('score').textContent = "正解率:"+Math.floor(hit/q.length*100)+"%";
document.getElementById('outline').textContent = q.length+"問中、正解は "+hit+"問でした";

detail =document.getElementById('detail');
}

//これで実行
window.addEventListener('load',init);
</script>
</body>
</html>